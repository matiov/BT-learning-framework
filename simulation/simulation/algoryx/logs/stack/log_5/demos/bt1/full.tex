% Please compile your document with LuaLaTex and add
% the following to your document preamble:
% \usepackage{tikz}
                    % \usetikzlibrary{arrows,decorations.pathmorphing,backgrounds,fit,positioning,
                    calc,shapes,graphs,graphdrawing}
                    % \usegdlibrary{trees}
                    % \tikzset{control/.style={draw, inner sep=1pt, regular polygon,
                    regular polygon sides=4, minimum width=1cm, fill=blue!15}}
                    % \tikzset{action/.style={draw, rectangle, inner sep=0.2cm, fill=green!40}}
                    % \tikzset{condition/.style={draw, minimum width=1cm, ellipse, inner sep=2pt,
                    fill=yellow!80}}
                    % \tikzset{>=stealth}
                    % \tikzset{level distance=1.5cm}
                    % \tikzset{sibling distance=2.5cm}
                    % \tikzset{grow=down}
\begin{tikzpicture}
	\graph[tree layout] {
		n1[as=$\rightarrow$, control] -> {
			n2[as=?, control] -> {
				n3[as={BlueBox roughly at $p_{1}$ in YellowBox?}, condition],
				n4[as=$\rightarrow$, control] -> {
					n5[as=?, control] -> {
						n6[as={In gripper BlueBox?}, condition],
						n7[as=$\rightarrow$, control] -> {
							n8[as=?, control] -> {
								n9[as={Gripper open?}, condition],
								n10[as={Set gripper open}, action]
							},
							n11[as={Pick BlueBox}, action]
						}
					},
					n12[as={Place BlueBox at $p_{1}$ in YellowBox}, action]
				}
			},
			n13[as={In gripper none?}, condition],
			n14[as=?, control] -> {
				n15[as={Gripper open?}, condition],
				n16[as={Set gripper open}, action]
			}
		}
	};
\end{tikzpicture}
